<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strum City Outdoors</title>
    <style>
        body {
            background: url('https://images.unsplash.com/photo-1505852679233-d9ab4e5c3a3c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') no-repeat center center fixed;
            background-size: cover;
            color: limegreen;
            font-family: Arial, sans-serif;
            padding: 20px;
            margin: 0;
            position: relative;
        }
        body::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.7); /* Dark overlay for readability */
            z-index: -1;
        }
        h1 { text-align: center; color: limegreen; }
        nav { display: flex; justify-content: center; margin: 20px 0; }
        nav a {
            color: limegreen; text-decoration: none; padding: 10px 20px; margin: 0 5px;
            border: 1px solid limegreen; border-radius: 5px;
            transition: background 0.3s;
        }
        nav a:hover, nav a.active { background: limegreen; color: black; animation: flash 1s infinite; }
        @keyframes flash { 50% { opacity: 0.5; } }
        main { display: flex; flex-wrap: wrap; justify-content: space-around; }
        section { flex: 1 1 300px; margin: 10px; border: 1px solid limegreen; padding: 15px; border-radius: 5px; background: rgba(0,0,0,0.5); }
        .loading { color: gray; }
        footer { text-align: center; margin-top: 20px; }
        footer a { color: limegreen; }
    </style>
</head>
<body>
    <h1>Strum City Outdoors</h1>
    <p style="text-align: center;">Texas vibes on steroids – nature's Netflix, no remote needed.</p>

    <nav>
        <a href="#dam" class="active">Dam Info</a>
        <a href="#coldspring">Coldspring Weather</a>
        <a href="#conroe">Lake Conroe Weather</a>
        <a href="#freeport">Freeport Offshore</a>
    </nav>

    <main>
        <section id="dam">
            <h2>Trinity River Lake Livingston Dam</h2>
            <p class="loading">Loading dam data...</p>
        </section>

        <section id="coldspring">
            <h2>Weather for Coldspring, TX</h2>
            <p class="loading">Loading weather...</p>
        </section>

        <section id="conroe">
            <h2>Weather for Lake Conroe, TX</h2>
            <p class="loading">Loading weather...</p>
        </section>

        <section id="freeport">
            <h2>Offshore Conditions - Freeport, TX (Buoy 42019)</h2>
            <p class="loading">Loading offshore data...</p>
        </section>
    </main>

    <footer>
        <p>Powered by nature & code. Check out <a href="https://strumcitybowfishing.com" target="_blank">Strum City Bowfishing</a>.</p>
    </footer>

    <script>
        // Dam: Reservoir level (08066190) + Discharge (08066192) via USGS
        Promise.all([
            fetch('https://waterservices.usgs.gov/nwis/iv/?format=json&sites=08066190&parameterCd=00065&siteStatus=all'), // Gage height
            fetch('https://waterservices.usgs.gov/nwis/iv/?format=json&sites=08066192&parameterCd=00060&siteStatus=all')  // Discharge
        ]).then(([res1, res2]) => Promise.all([res1.json(), res2.json()]))
          .then(([data1, data2]) => {
              const level = data1.value.timeSeries[0].values[0].value[0].value;
              const flow = data2.value.timeSeries[0].values[0].value[0].value;
              const time = new Date(data1.value.timeSeries[0].values[0].value[0].dateTime).toLocaleString();
              document.querySelector('#dam p').innerHTML = `Reservoir Level: ${level} ft | Discharge Flow: ${flow} cfs (as of ${time}).<br>Tip: High flow = wild rides!`;
          }).catch(() => document.querySelector('#dam p').innerHTML = 'Dam data dodging us – refresh!');

        // Weather: Current + daily forecast (Open-Meteo)
        function getWeather(lat, lon, sectionId) {
            fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,wind_speed_10m,wind_direction_10m,precipitation&daily=temperature_2m_max,temperature_2m_min,precipitation_sum&forecast_days=3`)
                .then(res => res.json())
                .then(data => {
                    const curr = data.current;
                    const daily = data.daily;
                    let html = `Current: Temp ${curr.temperature_2m}°C | Hum ${curr.relative_humidity_2m}% | Wind ${curr.wind_speed_10m} km/h from ${curr.wind_direction_10m}° | Precip ${curr.precipitation} mm<br>`;
                    html += `Next 3 Days: `;
                    for (let i = 0; i < 3; i++) {
                        html += `Day ${i+1}: High ${daily.temperature_2m_max[i]}°C / Low ${daily.temperature_2m_min[i]}°C / Precip ${daily.precipitation_sum[i]} mm<br>`;
                    }
                    document.querySelector(`#${sectionId} p`).innerHTML = html;
                }).catch(() => document.querySelector(`#${sectionId} p`).innerHTML = 'Weather went AWOL – try again!');
        }
        getWeather(30.59, -95.13, 'coldspring');
        getWeather(30.35, -95.56, 'conroe');

        // Offshore: More metrics from NDBC
        fetch('https://www.ndbc.noaa.gov/data/realtime2/42019.txt')
            .then(res => res.text())
            .then(text => {
                const lines = text.split('\n');
                const data = lines[2].trim().split(/\s+/);
                const waveHt = data[8]; // WVHT m
                const domPd = data[9]; // DPD sec
                const windSpd = data[6]; // WSPD m/s
                const windDir = data[5]; // WDIR deg
                const gust = data[7]; // GST m/s
                const waterTemp = data[12]; // WTMP C
                const time = `${data[0]}-${data[1]}-${data[2]} ${data[3]}:${data[4]} UTC`;
                document.querySelector('#freeport p').innerHTML = `Wave Height: ${waveHt} m | Period: ${domPd} s | Wind: ${windSpd} m/s from ${windDir}° (Gust ${gust} m/s) | Water Temp: ${waterTemp}°C (as of ${time}).<br>Surf's up... or down?`;
            }).catch(() => document.querySelector('#freeport p').innerHTML = 'Buoy bailed – check later!');
    </script>
</body>
</html>
